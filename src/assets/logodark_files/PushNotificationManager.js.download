var _0x5728=['responseText','value','open','requestPermission','now','getItem','gifgit_platform_notifications','then','readyState','onreadystatechange','setItem','success','checkPreviousToken','last_checked_timestamp','token','notif_body','register','catch','local','undefined','/api/user/updateFollows','GET','getLastToken','registration','append','data','saveToken','resource_version','stringify','/scripts/firebase-messaging-production-sw.js?v=','serviceWorker','server_host','status','send','/api/user/updateToken','getToken','previousToken','removeItem','deleteCurrentUserToken','messaging','updateCheckTimestamp','sandbox','getElementById','newToken','POST','followUserPushNotificationModal','patch','deleteToken','getLogData','onMessage','substring','length','parse','showNotification','error','requestToken','last_fcm_web_token','serverEnvironmentInput','Must\x20be\x20logged\x20in\x20for\x20previous\x20token\x20check','notif_title','close','processSubscriptions','This\x20is\x20a\x20data\x20notification','useServiceWorker'];(function(_0x48fbdb,_0x572826){var _0xa351f8=function(_0x47ee32){while(--_0x47ee32){_0x48fbdb['push'](_0x48fbdb['shift']());}};_0xa351f8(++_0x572826);}(_0x5728,0x13d));var _0xa351=function(_0x48fbdb,_0x572826){_0x48fbdb=_0x48fbdb-0x0;var _0xa351f8=_0x5728[_0x48fbdb];return _0xa351f8;};var _0x2ba107=_0xa351;'use strict';class PushNotificationManager{constructor(_0x47ee32){var _0xeaa211=_0xa351,_0x25afa8=this;_0x25afa8[_0xeaa211('0x2a')]=_0x47ee32;if(document[_0xeaa211('0x2d')](_0xeaa211('0x3c'))){var _0x13d09f=JSON[_0xeaa211('0x37')](document['getElementById'](_0xeaa211('0x3c'))[_0xeaa211('0x4')]);_0x13d09f['server_host']==_0xeaa211('0x15')||_0x13d09f[_0xeaa211('0x22')]==_0xeaa211('0x2c')?navigator['serviceWorker'][_0xeaa211('0x13')]('/scripts/firebase-messaging-sandbox-sw.js?v='+_0x13d09f['resource_version'])['then'](_0x22d6b6=>{var _0x38a36=_0xeaa211;_0x25afa8[_0x38a36('0x2a')][_0x38a36('0x2')](_0x22d6b6),_0x25afa8[_0x38a36('0x1a')]=_0x22d6b6;}):navigator[_0xeaa211('0x21')]['register'](_0xeaa211('0x20')+_0x13d09f[_0xeaa211('0x1e')])['then'](_0xdf23df=>{var _0x552242=_0xeaa211;_0x25afa8[_0x552242('0x2a')][_0x552242('0x2')](_0xdf23df),_0x25afa8[_0x552242('0x1a')]=_0xdf23df;});}this[_0xeaa211('0xf')](),_0x25afa8[_0xeaa211('0x2a')][_0xeaa211('0x34')](_0x83a3aa=>{var _0x10d83e=_0xeaa211;if(_0x10d83e('0x1c')in _0x83a3aa===!![]){console['warn'](_0x10d83e('0x1'));if(_0x10d83e('0x3e')in _0x83a3aa[_0x10d83e('0x1c')]&&'notif_body'in _0x83a3aa[_0x10d83e('0x1c')]){const _0x151b8f=_0x83a3aa[_0x10d83e('0x1c')][_0x10d83e('0x3e')],_0x81b663={'body':_0x83a3aa[_0x10d83e('0x1c')][_0x10d83e('0x12')]};_0x25afa8[_0x10d83e('0x1a')][_0x10d83e('0x38')](_0x151b8f,_0x81b663);}}});}[_0x2ba107('0xf')](){var _0x16c27c=this;if(typeof Storage!=='undefined')setTimeout(()=>{var _0x28507a=_0xa351,_0x149b4c=gifgitClient[_0x28507a('0x33')]();if(!_0x149b4c['authorized']){console[_0x28507a('0x39')](_0x28507a('0x3d'));return;}var _0x3a71f3=undefined,_0xbd06a1=localStorage[_0x28507a('0x8')](_0x28507a('0x3b'));if(_0xbd06a1!==null)try{_0x3a71f3=JSON['parse'](_0xbd06a1);}catch(_0x51bb93){localStorage['removeItem'](_0x28507a('0x3b'));return;}else return;if(_0x3a71f3){var _0x554824=0x5265c00,_0x49cec7=0x2932e00;if(_0x28507a('0x11')in _0x3a71f3&&_0x28507a('0x10')in _0x3a71f3){if(Date[_0x28507a('0x7')]()-_0x3a71f3[_0x28507a('0x10')]>_0x49cec7)_0x16c27c['updateCheckTimestamp']();else return;}else{localStorage[_0x28507a('0x28')](_0x28507a('0x3b'));return;}this[_0x28507a('0x2a')][_0x28507a('0x26')]()[_0x28507a('0xa')](_0x1ee142=>{var _0x55aa3b=_0x28507a;if(_0x1ee142){if(_0x1ee142[_0x55aa3b('0x35')](_0x1ee142['length']-0x14)==_0x3a71f3[_0x55aa3b('0x11')]){}else{var _0x2d5da0=new FormData();_0x2d5da0[_0x55aa3b('0x1b')](_0x55aa3b('0x2e'),_0x1ee142),_0x2d5da0[_0x55aa3b('0x1b')](_0x55aa3b('0x27'),_0x3a71f3[_0x55aa3b('0x11')]),_0x2d5da0[_0x55aa3b('0x1b')]('tokenType','Web');var _0x169176=new XMLHttpRequest();_0x169176[_0x55aa3b('0xc')]=function(){var _0xfeafcf=_0x55aa3b;if(this[_0xfeafcf('0xb')]==0x4&&this[_0xfeafcf('0x23')]==0xc8){var _0x39b130=JSON[_0xfeafcf('0x37')](this[_0xfeafcf('0x3')]);_0x39b130[_0xfeafcf('0x23')]==_0xfeafcf('0xe')&&_0x39b130[_0xfeafcf('0x1c')][_0xfeafcf('0x2e')]&&_0x16c27c[_0xfeafcf('0x1d')](_0x39b130[_0xfeafcf('0x1c')][_0xfeafcf('0x2e')]);var _0x21dd0e=new XMLHttpRequest();_0x21dd0e[_0xfeafcf('0xc')]=function(){var _0x285fee=_0xfeafcf;if(this[_0x285fee('0xb')]==0x4&&this[_0x285fee('0x23')]==0xc8){}},_0x21dd0e[_0xfeafcf('0x5')](_0xfeafcf('0x18'),_0xfeafcf('0x17')),_0x21dd0e[_0xfeafcf('0x24')]();}},_0x169176['open'](_0x55aa3b('0x2f'),_0x55aa3b('0x25')),_0x169176[_0x55aa3b('0x24')](_0x2d5da0);}}})[_0x28507a('0x14')](_0x4b1e46=>{});}else{}},0x7d0);else{}}[_0x2ba107('0x1d')](_0x3b50ee){var _0xe6b509=_0x2ba107;if(typeof Storage!==_0xe6b509('0x16')){var _0x3e5fc4=_0x3b50ee;_0x3e5fc4['length']>0x14&&(_0x3e5fc4=_0x3e5fc4[_0xe6b509('0x35')](_0x3e5fc4[_0xe6b509('0x36')]-0x14));var _0x2280c2={'token':_0x3e5fc4,'last_checked_timestamp':Date['now']()};localStorage[_0xe6b509('0xd')]('last_fcm_web_token',JSON[_0xe6b509('0x1f')](_0x2280c2));}}[_0x2ba107('0x2b')](){var _0x2b42da=_0x2ba107;if(typeof Storage!=='undefined')try{var _0x49eb82=JSON[_0x2b42da('0x37')](localStorage[_0x2b42da('0x8')](_0x2b42da('0x3b')));_0x49eb82['last_checked_timestamp']=Date[_0x2b42da('0x7')](),localStorage['setItem'](_0x2b42da('0x3b'),JSON[_0x2b42da('0x1f')](_0x49eb82));}catch(_0xf5d18e){}}[_0x2ba107('0x19')](){var _0xa591c7=_0x2ba107;if(typeof Storage!==_0xa591c7('0x16'))try{return JSON[_0xa591c7('0x37')](localStorage[_0xa591c7('0x8')](_0xa591c7('0x3b')))[_0xa591c7('0x11')];}catch(_0x412c08){return'';}return'';}[_0x2ba107('0x0')](_0x46f84e){var _0x200948=_0x2ba107,_0x25596b=this;if(typeof _0x46f84e===_0x200948('0x16'))return;alert(JSON[_0x200948('0x1f')](_0x46f84e));if(typeof _0x46f84e[_0x200948('0x9')]!=='undefined'&&_0x46f84e[_0x200948('0x9')]==![])this[_0x200948('0x2a')][_0x200948('0x6')]()[_0x200948('0xa')](function(){var _0x4fd777=_0x200948;return _0x25596b[_0x4fd777('0x2a')][_0x4fd777('0x26')]();})[_0x200948('0xa')](function(_0x57e744){var _0x5e7f5d=_0x200948;gifgitClient['user'][_0x5e7f5d('0x31')]({'FCMWebToken':_0x57e744});})[_0x200948('0x14')](function(_0x277d62){});else{}}[_0x2ba107('0x32')](_0xd99c0){var _0x1545c1=_0x2ba107;this['messaging'][_0x1545c1('0x32')](_0xd99c0);}[_0x2ba107('0x29')](){var _0x387866=_0x2ba107;this['messaging']['getToken']()['then'](_0x6986a5=>{var _0x29eea4=_0xa351;if(_0x6986a5)this['messaging'][_0x29eea4('0x32')](_0x6986a5);else{}})[_0x387866('0x14')](_0x3a67b6=>{});}[_0x2ba107('0x3a')](){var _0x5e8de1=_0x2ba107,_0x1b5efb=this,_0x44bd42=undefined;document[_0x5e8de1('0x2d')](_0x5e8de1('0x30'))&&(_0x44bd42=new FollowUserProfileNotificationDialog()),this[_0x5e8de1('0x2a')][_0x5e8de1('0x6')]()[_0x5e8de1('0xa')](function(){var _0x2bbb0f=_0x5e8de1;return _0x1b5efb['messaging'][_0x2bbb0f('0x26')]();})[_0x5e8de1('0xa')](function(_0x5f2463){var _0xf6e5c9=_0x5e8de1;_0x44bd42&&_0x44bd42[_0xf6e5c9('0x3f')]();})[_0x5e8de1('0x14')](function(_0x4efa2d){_0x44bd42&&_0x44bd42['close']();});}}